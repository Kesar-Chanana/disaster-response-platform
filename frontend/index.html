<!DOCTYPE html>
<html>
<head>
  <title>Disaster Response Platform</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    form, .section { margin-bottom: 20px; }
    textarea, input, select { width: 100%; padding: 8px; margin-top: 4px; }
    button { padding: 10px 20px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Disaster Response Platform</h1>

  <div class="section">
    <h2>Create Disaster</h2>
    <form id="createDisasterForm">
      <input type="text" placeholder="Title" name="title" required /><br/>
      <textarea name="description" placeholder="Description" required></textarea><br/>
      <input type="text" placeholder="Location Name" name="location_name" required /><br/>
      <input type="text" placeholder="Tags (comma-separated)" name="tags" required /><br/>
      <button type="submit">Create Disaster</button>
    </form>
  </div>

  <div class="section">
    <h2>Submit Report</h2>
    <form id="reportForm">
      <input type="text" placeholder="Disaster ID" name="disaster_id" required /><br/>
      <input type="text" placeholder="User ID" name="user_id" required /><br/>
      <textarea name="content" placeholder="Report Content" required></textarea><br/>
      <input type="url" placeholder="Image URL" name="image_url" /><br/>
      <button type="submit">Submit Report</button>
    </form>
  </div>

  <div class="section" id="output">
    <h2>API Response</h2>
    <pre id="apiResponse"></pre>
  </div>

  <script>
    async function postData(url = '', data = {}) {
  const response = await fetch(`http://localhost:3000${url}`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify(data)
  });
  return response.json();
}


    document.getElementById('createDisasterForm').onsubmit = async (e) => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target));
      data.tags = data.tags.split(',').map(tag => tag.trim());
      const res = await postData('/disasters', data);
      document.getElementById('apiResponse').textContent = JSON.stringify(res, null, 2);
    };

    document.getElementById('reportForm').onsubmit = async (e) => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target));
      const res = await postData('/reports', data);
      document.getElementById('apiResponse').textContent = JSON.stringify(res, null, 2);
    };
  </script>
</body>
</html>
